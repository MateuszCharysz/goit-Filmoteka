function e(e,t,o,n){Object.defineProperty(e,t,{get:o,set:n,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return o[e]=a,t.call(a.exports,a,a.exports),a.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},t.parcelRequired7c6=a),a.register("77JN5",(function(t,o){e(t.exports,"openModal",(function(){return m}));var n=a("j2Nw7"),i=a("nxuqK"),s=a("jPDG0"),r=a("97FQv"),l=a("4uxNo"),d=a("lxbfG");let c=!1,u=0;const m=e=>{if(c=!0,u=window.scrollY,!e.target.closest(".movie__card"))return;s.default.createLocalStorage();const t=document.createElement("div");t.classList.add("backdrop");const o=e.target.closest(".movie__card").getAttribute("data-id"),a=s.default.findMovieId(o,"watched"),i=s.default.findMovieId(o,"queued");(0,n.fetchMovieById)(o).then((e=>{t.innerHTML=(0,d.renderModal)(e),document.body.appendChild(t),p(!0,u);const n=document.querySelector("#modal__close"),s=document.getElementById("watched"),r=document.getElementById("queue");v(s,o,"watched",a),v(r,o,"queued",i),n.addEventListener("click",(()=>{s.removeEventListener("click",(()=>null)),r.removeEventListener("click",null),p(!1,u),(0,l.closeModal)()}))})).catch((e=>{throw new Error(e)})),addEventListener("keydown",_)},v=(e,t,o,a)=>{const l=document.body.classList.contains("library-page"),d=document.body.classList.contains("watched-page"),c=document.body.classList.contains("queue-page");e.classList.toggle("is-save",a),e.addEventListener("click",(()=>{if(s.default.findMovieId(t,o)){s.default.removeMovieId(t,o),e.classList.remove("is-save");const n=document.querySelector(`[data-id="${t}"]`);if(n){const a=i.movieId.indexOf(t);a>-1&&i.movieId.splice(a,1),(d&&"watched"===o||c&&"queued"===o||!l&&e.id===o)&&n.remove()}}else s.default.saveMovieId(t,o),e.classList.add("is-save"),(d&&"watched"===o||c&&"queued"===o||!l&&e.id===o)&&(i.movieId.push(t),(0,n.fetchMovieById)(t).then((e=>{if(l)i.movieBox.insertAdjacentHTML("beforeend",(0,r.movieCard)(e));else{const t=document.querySelector(".watched-movies"),o=document.querySelector(".queued-movies");d?t.insertAdjacentHTML("beforeend",(0,r.movieCard)(e)):c&&o.insertAdjacentHTML("beforeend",(0,r.movieCard)(e))}})))}))},p=(e,t)=>{e?(document.body.style.top=`-${t}px`,document.body.style.position="fixed"):(document.body.style.position="",document.body.style.top="",console.log(t),window.scrollTo(0,t))},_=e=>{c&&27===e.keyCode&&((0,l.closeModal)(),c=!1,p(!1,u))}})),a.register("j2Nw7",(function(t,o){e(t.exports,"fetchMovieById",(function(){return n}));const n=e=>fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=64cb7e9375c055230d64b013c4bca79f`).then((e=>{if(!e.ok)throw 429===e.status?console.error("Error: Too many requests to API."):console.error("Error: Failed to fetch data from API. Status code:",e.status),new Error(e.status);return e.json()})).catch((e=>{throw new Error(e)}))})),a.register("nxuqK",(function(t,o){e(t.exports,"movieBox",(function(){return n})),e(t.exports,"loader",(function(){return a})),e(t.exports,"movieId",(function(){return i})),e(t.exports,"movieDetails",(function(){return s})),e(t.exports,"cbClear",(function(){return r}));const n=document.querySelector(".box"),a=document.querySelector(".loader");let i=[],s=[];const r=()=>{i.length=0,s.length=0,n.innerHTML=""}})),a.register("jPDG0",(function(t,o){e(t.exports,"default",(function(){return s}));var n=a("aGWRh");const i=(e,t)=>t.includes(e);var s={createLocalStorage:(e="watched",t="queued")=>{null===localStorage.getItem(e)&&n.default.save(e,[]),null===localStorage.getItem(t)&&n.default.save(t,[])},saveMovieId:(e,t)=>{const o=n.default.load(t);!0!==i(e,o)&&(o.push(e),n.default.save(t,o))},removeMovieId:(e,t)=>{const o=n.default.load(t);!0===i(e,o)&&(o.splice(o.indexOf(e),1),n.default.save(t,o))},findMovieId:(e,t)=>{const o=n.default.load(t);return i(e,o)}}})),a.register("aGWRh",(function(t,o){e(t.exports,"default",(function(){return n}));var n={save:(e,t)=>{try{const o=JSON.stringify(t);localStorage.setItem(e,o)}catch(e){console.error("Set state error: ",e.message)}},load:e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},remove:e=>localStorage.removeItem(e)}})),a.register("97FQv",(function(t,o){e(t.exports,"movieCard",(function(){return n}));const n=e=>{const t=e.genres.map((e=>e.name)).join(", ");return`<div class="movie__card" data-id="${e.id}">\n   <div class="movie__imgbox">\n     <img class="movie__img" src="${e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"https://movienewsletters.net/photos/000000h1.jpg"}"\n     alt="${e.title}" loading="lazy"/>\n   </div>\n   <p class="movie__title">\n     <b>${e.title}</b>\n   </p>\n   <div class="movie__info">\n     <p class="movie__genres">\n       ${t.slice(0,2)}&nbsp;\n     </p>\n     <p class="movie__year">\n       | \n     </p>\n   </div>\n  </div>\n   `}})),a.register("4uxNo",(function(t,o){e(t.exports,"closeModal",(function(){return n}));const n=()=>{document.querySelector(".backdrop").remove(),document.body.classList.remove("overflow-off")}})),a.register("lxbfG",(function(t,o){e(t.exports,"renderModal",(function(){return n}));const n=e=>{const t=e.genres.map((e=>e.name)).join(", ");return`\n    <div class='modal'>\n        <button class='modal__button modal__button--close' id='modal__close'>\n        </button>\n        <img class="modal__img" src="${e.poster_path?`https://image.tmdb.org/t/p/w500${e.poster_path}`:"https://movienewsletters.net/photos/000000h1.jpg"}" />\n        <div class="modal__content">\n            <h2 class="modal__title">${e.original_title}</h2>\n            <ul class="modal__list">\n                <li class="modal__item">\n                    <p class="modal__item--label">Vote / Votes</p>\n                    <div class="modal__item--vote">\n                        <p class="modal__item--value modal__item--value--vote">\n                            <vote_average>\n                                ${e.vote_average.toFixed(1)}\n                            </vote_average>\n                            /\n                            <vote__count>\n                                ${e.vote_count}\n                            </vote__count>\n                        </p>\n                    </div>\n                </li>\n                <li class="modal__item">\n                    <p class="modal__item--label">Popularity</p>\n                    <p class="modal__item--value">${e.popularity.toFixed(1)}</p>\n                </li>\n                <li class="modal__item">\n                    <p class="modal__item--label">Original Title</p>\n                    <p class="modal__item--value big">${e.original_title}</p>\n                </li>\n                <li class="modal__item">\n                    <p class="modal__item--label">Genre</p>\n                    <p class="modal__item--value">${t}</p>\n                </li>\n            </ul>\n            <div class="modal__overview">\n                <h3 class="modal__overview--about">ABOUT</h3>\n                <p class="modal__overview--overview">${e.overview}</p>\n            </div>\n        <div class="modal__buttons">\n            <button id="watched" class="modal__button modal__button--watched watched">Add to watched</button>\n            <button id="queue" class="modal__button modal__button--queue queued">Add to queue</button>\n        </div>\n    </div>\n    `}})),a.register("3bKkK",(function(t,o){e(t.exports,"fetchingMovieDetails",(function(){return s}));var n=a("nxuqK"),i=a("bNmRG");const s=async()=>{for(let e of n.movieId)try{const t=await fetch(i.default.apiUrlStringBuilder(i.default.API_ID(e)));if(!t.ok)throw new Error(t.status);const o=await t.json();n.movieDetails.push(o)}catch(e){console.log(e)}console.log(n.movieDetails)}})),a.register("bNmRG",(function(t,o){e(t.exports,"default",(function(){return i}));const n="https://api.themoviedb.org/3/",a="64cb7e9375c055230d64b013c4bca79f";var i={httpCodeHandler:e=>{if(!e.ok)throw new Error(e.status);return e.json()},API_KEY:a,API_MAIN_URL:n,API_SEARCH:(e="",t=1)=>`search/movie?api_key=${a}&language=en-US&query=${e}&page=${t}&include_adult=false`,API_TRENDING:(e=1)=>`trending/all/day?api_key=${a}&page=${e}`,API_ID:e=>`movie/${e}?api_key=${a}`,apiUrlStringBuilder:e=>`https://api.themoviedb.org/3/${e}`}})),a.register("4sJit",(function(t,o){e(t.exports,"updatingMovieHTML",(function(){return i}));var n=a("nxuqK");const i=()=>{let e,t,o="";n.movieDetails.forEach((n=>{e=n.genres.map((e=>` ${e.name}`)),t=n.release_date.substring(0,4),o+=`<div class="movie__card" data-id="${n.id}">\n      <div class="movie__imgbox">\n        <img class="movie__img" src="${n.poster_path?`https://image.tmdb.org/t/p/w500${n.poster_path}`:"https://movienewsletters.net/photos/000000h1.jpg"}"\n        alt="${n.title}" loading="lazy"/>\n      </div>\n      <p class="movie__title">\n        <b>${n.title}</b>\n      </p>\n      <div class="movie__info">\n        <p class="movie__genres">\n          ${e.slice(0,2)}&nbsp;\n        </p>\n        <p class="movie__year">\n          | ${t}\n        </p>\n      </div>\n    </div>`})),n.movieBox.innerHTML+=o}}));
//# sourceMappingURL=library.57aeaabe.js.map
